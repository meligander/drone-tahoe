{"ast":null,"code":"import { USERAUTH_LOADED, AUTH_ERROR, LOGIN_FAIL, LOGIN_SUCCESS, LOGOUT, SIGNUP_FAIL, EMAILAUTH_SENT, REMOVEAUTH_ERROR, SIGNUP_SUCCESS, PASSWORD_CHANGED, EMAIL_ERROR } from '../actions/types';\nconst initialState = {\n  token: localStorage.getItem('token'),\n  loggedUser: null,\n  loading: true,\n  isAuthenticated: false,\n  error: '',\n  emailSent: false\n};\n\nconst authReducer = (state = initialState, action) => {\n  const {\n    type,\n    payload\n  } = action;\n\n  switch (type) {\n    case USERAUTH_LOADED:\n      return { ...state,\n        loading: false,\n        loggedUser: payload,\n        isAuthenticated: true\n      };\n\n    case SIGNUP_SUCCESS:\n      return { ...state,\n        loading: false,\n        loggedUser: payload.user,\n        isAuthenticated: true,\n        token: payload.token\n      };\n\n    case LOGIN_SUCCESS:\n      return { ...state,\n        loading: false,\n        token: payload.token\n      };\n\n    case AUTH_ERROR:\n      return { ...state,\n        token: null,\n        isAuthenticated: false,\n        loggedUser: null,\n        loading: false,\n        error: payload ? payload : ''\n      };\n\n    case PASSWORD_CHANGED:\n      return { ...state,\n        token: payload.token,\n        loading: false,\n        loggedUser: payload.user,\n        isAuthenticated: true\n      };\n\n    case EMAIL_ERROR:\n    case SIGNUP_FAIL:\n    case LOGIN_FAIL:\n      return { ...state,\n        error: payload,\n        loading: false,\n        token: null,\n        isAuthenticated: false,\n        loggedUser: null\n      };\n\n    case EMAILAUTH_SENT:\n      return { ...state,\n        emailSent: true,\n        error: ''\n      };\n\n    case LOGOUT:\n      return { ...state,\n        token: null,\n        isAuthenticated: false,\n        loggedUser: null,\n        loading: true,\n        error: ''\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default authReducer;","map":{"version":3,"sources":["C:/Users/melig/OneDrive/Escritorio/prog/Tahoe-drone backend/client/src/reducers/auth.js"],"names":["USERAUTH_LOADED","AUTH_ERROR","LOGIN_FAIL","LOGIN_SUCCESS","LOGOUT","SIGNUP_FAIL","EMAILAUTH_SENT","REMOVEAUTH_ERROR","SIGNUP_SUCCESS","PASSWORD_CHANGED","EMAIL_ERROR","initialState","token","localStorage","getItem","loggedUser","loading","isAuthenticated","error","emailSent","authReducer","state","action","type","payload","user"],"mappings":"AAAA,SACCA,eADD,EAECC,UAFD,EAGCC,UAHD,EAICC,aAJD,EAKCC,MALD,EAMCC,WAND,EAOCC,cAPD,EAQCC,gBARD,EASCC,cATD,EAUCC,gBAVD,EAWCC,WAXD,QAYO,kBAZP;AAcA,MAAMC,YAAY,GAAG;AACpBC,EAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADa;AAEpBC,EAAAA,UAAU,EAAE,IAFQ;AAGpBC,EAAAA,OAAO,EAAE,IAHW;AAIpBC,EAAAA,eAAe,EAAE,KAJG;AAKpBC,EAAAA,KAAK,EAAE,EALa;AAMpBC,EAAAA,SAAS,EAAE;AANS,CAArB;;AASA,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAGV,YAAT,EAAuBW,MAAvB,KAAkC;AACrD,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAoBF,MAA1B;;AAEA,UAAQC,IAAR;AACC,SAAKvB,eAAL;AACC,aAAO,EACN,GAAGqB,KADG;AAENL,QAAAA,OAAO,EAAE,KAFH;AAGND,QAAAA,UAAU,EAAES,OAHN;AAINP,QAAAA,eAAe,EAAE;AAJX,OAAP;;AAMD,SAAKT,cAAL;AACC,aAAO,EACN,GAAGa,KADG;AAENL,QAAAA,OAAO,EAAE,KAFH;AAGND,QAAAA,UAAU,EAAES,OAAO,CAACC,IAHd;AAINR,QAAAA,eAAe,EAAE,IAJX;AAKNL,QAAAA,KAAK,EAAEY,OAAO,CAACZ;AALT,OAAP;;AAOD,SAAKT,aAAL;AACC,aAAO,EACN,GAAGkB,KADG;AAENL,QAAAA,OAAO,EAAE,KAFH;AAGNJ,QAAAA,KAAK,EAAEY,OAAO,CAACZ;AAHT,OAAP;;AAKD,SAAKX,UAAL;AACC,aAAO,EACN,GAAGoB,KADG;AAENT,QAAAA,KAAK,EAAE,IAFD;AAGNK,QAAAA,eAAe,EAAE,KAHX;AAINF,QAAAA,UAAU,EAAE,IAJN;AAKNC,QAAAA,OAAO,EAAE,KALH;AAMNE,QAAAA,KAAK,EAAEM,OAAO,GAAGA,OAAH,GAAa;AANrB,OAAP;;AAQD,SAAKf,gBAAL;AACC,aAAO,EACN,GAAGY,KADG;AAENT,QAAAA,KAAK,EAAEY,OAAO,CAACZ,KAFT;AAGNI,QAAAA,OAAO,EAAE,KAHH;AAIND,QAAAA,UAAU,EAAES,OAAO,CAACC,IAJd;AAKNR,QAAAA,eAAe,EAAE;AALX,OAAP;;AAOD,SAAKP,WAAL;AACA,SAAKL,WAAL;AACA,SAAKH,UAAL;AACC,aAAO,EACN,GAAGmB,KADG;AAENH,QAAAA,KAAK,EAAEM,OAFD;AAGNR,QAAAA,OAAO,EAAE,KAHH;AAINJ,QAAAA,KAAK,EAAE,IAJD;AAKNK,QAAAA,eAAe,EAAE,KALX;AAMNF,QAAAA,UAAU,EAAE;AANN,OAAP;;AAQD,SAAKT,cAAL;AACC,aAAO,EACN,GAAGe,KADG;AAENF,QAAAA,SAAS,EAAE,IAFL;AAGND,QAAAA,KAAK,EAAE;AAHD,OAAP;;AAKD,SAAKd,MAAL;AACC,aAAO,EACN,GAAGiB,KADG;AAENT,QAAAA,KAAK,EAAE,IAFD;AAGNK,QAAAA,eAAe,EAAE,KAHX;AAINF,QAAAA,UAAU,EAAE,IAJN;AAKNC,QAAAA,OAAO,EAAE,IALH;AAMNE,QAAAA,KAAK,EAAE;AAND,OAAP;;AAQD;AACC,aAAOG,KAAP;AAlEF;AAoEA,CAvED;;AAyEA,eAAeD,WAAf","sourcesContent":["import {\r\n\tUSERAUTH_LOADED,\r\n\tAUTH_ERROR,\r\n\tLOGIN_FAIL,\r\n\tLOGIN_SUCCESS,\r\n\tLOGOUT,\r\n\tSIGNUP_FAIL,\r\n\tEMAILAUTH_SENT,\r\n\tREMOVEAUTH_ERROR,\r\n\tSIGNUP_SUCCESS,\r\n\tPASSWORD_CHANGED,\r\n\tEMAIL_ERROR,\r\n} from '../actions/types';\r\n\r\nconst initialState = {\r\n\ttoken: localStorage.getItem('token'),\r\n\tloggedUser: null,\r\n\tloading: true,\r\n\tisAuthenticated: false,\r\n\terror: '',\r\n\temailSent: false,\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n\tconst { type, payload } = action;\r\n\r\n\tswitch (type) {\r\n\t\tcase USERAUTH_LOADED:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tloggedUser: payload,\r\n\t\t\t\tisAuthenticated: true,\r\n\t\t\t};\r\n\t\tcase SIGNUP_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tloggedUser: payload.user,\r\n\t\t\t\tisAuthenticated: true,\r\n\t\t\t\ttoken: payload.token,\r\n\t\t\t};\r\n\t\tcase LOGIN_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: false,\r\n\t\t\t\ttoken: payload.token,\r\n\t\t\t};\r\n\t\tcase AUTH_ERROR:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttoken: null,\r\n\t\t\t\tisAuthenticated: false,\r\n\t\t\t\tloggedUser: null,\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: payload ? payload : '',\r\n\t\t\t};\r\n\t\tcase PASSWORD_CHANGED:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttoken: payload.token,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tloggedUser: payload.user,\r\n\t\t\t\tisAuthenticated: true,\r\n\t\t\t};\r\n\t\tcase EMAIL_ERROR:\r\n\t\tcase SIGNUP_FAIL:\r\n\t\tcase LOGIN_FAIL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\terror: payload,\r\n\t\t\t\tloading: false,\r\n\t\t\t\ttoken: null,\r\n\t\t\t\tisAuthenticated: false,\r\n\t\t\t\tloggedUser: null,\r\n\t\t\t};\r\n\t\tcase EMAILAUTH_SENT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\temailSent: true,\r\n\t\t\t\terror: '',\r\n\t\t\t};\r\n\t\tcase LOGOUT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttoken: null,\r\n\t\t\t\tisAuthenticated: false,\r\n\t\t\t\tloggedUser: null,\r\n\t\t\t\tloading: true,\r\n\t\t\t\terror: '',\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport default authReducer;\r\n"]},"metadata":{},"sourceType":"module"}